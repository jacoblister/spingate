<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="spingate.css">
    <script src="spingate.js"></script>
    <script>
        function elem(name, ...args) {
            let element = document.createElement(name)

            args.forEach(arg => {
                if (arg.tagName) {
                    element.appendChild(arg)
                } else if (typeof arg == "string") {
                    element.textContent = arg
                } else if (Array.isArray(arg)) {
                    arg.forEach(item => {
                        element.appendChild(item)
                    })
                } else if (typeof arg == "object") {
                    for (key in arg) {
                        if (arg[key] != undefined) {
                            element.setAttribute(key, arg[key])
                        }
                    }
                }
            })

            return element
        }

        function render() {
            const data = ["", "0", "", "", "", "B3", "B2", "B1", "B0", "A0", "A1", "A2", "A3"]

            const table = document.getElementById("table");
            while (table.firstChild) {
                table.removeChild(table.lastChild);
            }

            table.appendChild(elem("tbody",
                elem("tr",
                    elem("td", "Program"),
                    elem("td", { colspan: 10 },
                        elem("select", [
                            "Builtin",
                            "Logic Gates",
                            "LSFR",
                            "Cellular Automata",
                            "Calculator"
                        ].map(option => elem("option", option)))
                    ),
                    elem("td", { colspan: 3 },
                        elem("button", "Edit")
                    )
                ),
                elem("tr"),
                elem("tr",
                    elem("td", "Store/Load"),
                    elem("td", { class: "bit-off" }),
                    elem("td", { class: "bit-on", id: "store" }),
                ),
                elem("tr",
                    elem("td", "Accumulator"),
                    elem("td", { class: "bit-off" }),
                ),
                elem("tr"),
                elem("tr",
                    elem("td", "Data"),
                    data.map((bit, index) => elem("td", { class: index & 1 ? "bit-on" : "bit-off" }))
                ),
                elem("tr",
                    elem("td"),
                    data.map((bit, index) => elem("td", bit))
                ),
                elem("tr",
                    elem("td"),
                    elem("td", { colspan: 5 }),
                    elem("td", { colspan: 4, style: "border: 1px solid black;" }, "B:0"),
                    elem("td", { colspan: 4, style: "border: 1px solid black;" }, "A:0"),
                ),
                elem("tr"),
                elem("tr",
                    elem("td", elem("button", { disabled: 1 }, "Step")),
                    elem("td", { colspan: 13 },
                        elem("input", { type: "text", value: "0011", disabled: 1 })
                    )
                ),
                elem("tr",
                    elem("td", "Loop"),
                    elem("td", { colspan: 13 },
                        elem("select", [
                            "None",
                            "Slow",
                            "Medium",
                            "Fase",
                        ].map(option => elem("option", option)))
                    ),
                ),
                [
                    "Step",
                    "Slow",
                    "Medium", ,
                    "Fast",
                ].map((speed, index) => elem("tr",
                    elem("td", index == 0 ? "Speed" : ""),
                    elem("td", { colspan: 13, style: "display:flex; flex-direction:row;" },
                        elem("input", { id: speed, type: "radio", checked: speed == "Medium" ? 1 : undefined }),
                        elem("label", { for: speed }, speed),
                    ),
                )),
                [
                    ["Spin", "0"],
                    ["Gate", "1"],
                    ["Back", "000"],
                    ["Toggle", "11"],
                    ["Nop", "1111"],
                ].map(prog => elem("tr",
                    elem("td", elem("button", prog[0])),
                    elem("td", { colspan: 13 }, elem("input", { value: prog[1], disabled: 1 })),
                )),
                elem("tr"),
                elem("tr",
                    elem("td", elem("button", "Custom")),
                    elem("td", { colspan: 13 }, elem("input", { value: "" })),
                ),
            ))
        }
    </script>
</head>

<body onload="render()">
    <h1>SpinGate</h1>
    <p>SpinGate is a [1-bit computer] with a corresponding single bit [1-instruction language].
        It has only a single instruction - 0 or 1</p>
    <p>Choose a program:</p>

    <table id="table"></table>
</body>

</html>